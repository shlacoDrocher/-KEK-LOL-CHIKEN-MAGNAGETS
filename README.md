# Веб-сервер "Какой ты брейнрот?"

Легкий и эффективный HTTP-сервер, основанный на библиотеке Mongoose, для обслуживания интерактивного веб-приложения "Какой ты брейнрот?".

## Описание

Этот проект представляет собой веб-сервер, который обслуживает интерактивный тест "Какой ты брейнрот?". Сервер написан на C и использует библиотеку Mongoose для HTTP-функциональности. Он может работать как в обычном режиме, так и в режиме демона (фоновом режиме).

### Основные возможности

- Обслуживание статических файлов (HTML, CSS, JavaScript, изображения, аудио, видео)
- Автоматическое определение MIME-типов для различных файлов
- Работа в режиме демона (фоновый режим)
- Обработка сигналов для корректного завершения работы
- Запись PID в файл для удобства управления процессом
- Настраиваемый порт и корневая директория
- Расширенное логирование с различными уровнями важности

## Требования

- Компилятор GCC
- Библиотека pthread
- Linux/Unix-подобная операционная система

## Структура проекта

```
.
├── constants/          # Константы и определения
│   └── constants.h     # Заголовочный файл с константами
├── input/              # Модуль обработки ввода
│   ├── input.c         # Реализация функций обработки ввода
│   └── input.h         # Заголовочный файл для модуля ввода
├── logger/             # Модуль логирования
│   ├── logger.c        # Реализация функций логирования
│   └── logger.h        # Заголовочный файл для модуля логирования
├── logs/               # Директория для хранения логов
│   └── server.log      # Файл лога сервера
├── mongoose/           # Библиотека Mongoose
│   ├── mongoose.c      # Реализация библиотеки
│   └── mongoose.h      # Заголовочный файл библиотеки
├── templates/          # Веб-файлы
│   ├── css/            # CSS стили
│   ├── js/             # JavaScript файлы
│   ├── media/          # Медиа файлы (изображения, аудио, видео)
│   ├── error.html      # Страница ошибки
│   └── index.html      # Главная страница
├── main.c              # Основной файл программы
├── Makefile            # Файл сборки
└── README.md           # Документация проекта
```

## Сборка и установка

### Сборка проекта

```bash
make
```

### Установка

```bash
sudo make install
```

### Удаление

```bash
sudo make uninstall
```

## Использование

### Запуск сервера в обычном режиме

```bash
./server
```

или

```bash
make run
```

### Запуск сервера в фоновом режиме (демон)

```bash
./server -d
```

или

```bash
make daemon
```

### Остановка сервера

```bash
make stop
```

или

```bash
kill -TERM $(cat /tmp/server.pid)
```

### Параметры командной строки

- `-d, --daemon` - запустить сервер в режиме демона
- `-p, --pid FILE` - указать путь к PID файлу (по умолчанию: /tmp/server.pid)
- `-r, --root DIR` - указать корневую директорию для веб-файлов (по умолчанию: templates)
- `-P, --port PORT` - указать порт для веб-сервера (по умолчанию: 8000)
- `-h, --help` - показать справку и выйти

## Логирование

Сервер имеет встроенную систему логирования с различными уровнями важности:

- DEBUG - отладочная информация
- INFO - информационные сообщения
- WARNING - предупреждения
- ERROR - ошибки
- CRITICAL - критические ошибки

Логи сохраняются в директории `logs/` в файле `server.log`.

## Разработка

### Сборка с отладочной информацией

```bash
make debug
```

### Очистка сборки

```bash
make clean
```

## Лицензия

Этот проект распространяется под лицензией MIT. См. файл LICENSE для получения дополнительной информации.

## Автор

 Студент группы ПВ-241
 Беляев Евгений Александрович